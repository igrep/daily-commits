# 2026/01/12 - 2026/01/18

- custard:
    - [ ] sum-moneyの改善
        - 設計:
            - 日付にマッチする行を返す
                - => コメントがマッチする行だけを返す（grepでよさそう）
                    - => 合計のみを出す
                    - => 内訳を出す
        - 2026/01/12: 昨日考えたとおり、マクロを呼ぶときはひとまず`Context`を渡さないことにしたことで直るかと思いきや、まだ問題が。マクロに渡す引数の評価規則に問題がありそう
        - 2026/01/13: テストを通せた！明日は動作確認と出来れば`git commit`しよう
        - 2026/01/14: `apps/igrep-cashbook`が古いバージョンを参照してしまっているせいで、うまく動かない。pnpm-workspaceの設定が悪いっぽい
            - で、pnpm-workspaceを直したら、なぜか`eslint-plugin-no-ignore-returned-union`のインストールが出来ない。あれこれ調べてみたら、package.jsonの`name`の末尾に空白が！
        - 2026/01/15: `eslint-plugin-no-ignore-returned-union`を直した。無事、`pnpm i`してtranspileもできたので、transpileしたコードを見てみたが、何故かマクロが展開できていないらしい。マクロとして認識されていないようだ
            - 理由は単純。`(const { continueIfNonItem } lib)`したときに、`lib.continueIfNonItem`がmacroであることが忘れ去られてしまうんだ。関数の引数として渡される場合とか考えると、なかなか難しい問題ね。マクロと普通の関数の呼び出しを区別しない仕様故の問題だなぁ。代入とか関数の引数として渡した時点でエラーにする方が簡単だろうなぁ
                - 問題がある代入をエラーにしつつ、アプリ側での問題解決のために`import`の構文を一部実装するか
        - 2026/01/16: テストケースを一部追加。考えるケースがたくさんあるねぇ。要は関数呼び出し以外で一切使ってはいけないってことだからなぁ
        - 2026/01/17: `Macro`だけでなく、`Namespace`も同様の問題があるだろうし、`Macro`より解決が面倒くさそうだ
            - いや、`Namespace`単体を代入したり関数の引数に渡す（と、言うより普通の式として扱う）のを禁止すれば十分そう
- 読書など:
    - [アンダースタンディング コンピュテーション](https://www.oreilly.co.jp/books/9784873116976/)
        - 2025/11/01 - 2026/01/17

[先週の記録はこちら](https://github.com/igrep/daily-commits/blob/c532e6564aa3b74132a4f93c8b652e7f5170a1d7/yesterday.md)
