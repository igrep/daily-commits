# 2021/01/11 - 2021/01/17

- 記事:
    - 修正
        - 字数を自分で見つけた範囲で少なく
            - 2021/01/11: 一通り修正。
            - 結果: 達成
        - 指摘された内容を都度修正
            - 2021/01/13: 今朝気づいた、というか無意識に無視していた問題を修正。WebAssembly・JavaScript間の呼び出しコストは少なくともFirefoxではもうほとんどないはずなのだ
            - 結果: 達成。あとは編集さんがレイアウトしてくれるとのことなのでもう完成でいいや
- wasm2arm32 compiler:
    - i32.wastにおけるすべての`assert_trap`のテストケースを解決
        - 結果: 未達
    - i32.wastにおけるすべての`assert_invalid`のテストケースを解決
        - 結果: 未達
- Haskell-jp活動:
    - slack-logの修正
        - タイムスタンプがN日以前のもので、かつthreadファイルがないmessage、またはthreadファイルにおける最後のメッセージのタイムスタンプがN日以前のmessageに、replyがついてないか確認する
            - 2021/01/12: 条件に一致するmessageを選び出す処理を実装。本当は条件にマッチするメッセージを見つけた都度APIを叩いた方が実行効率はいいだろうけど、まぁひとまず速度はあまり気にしないと言うことで。その方がテストも書きやすいだろうし。
                - 条件にマッチするthreadの、最初と最後のmessageのタイムスタンプを取得する、という方法ならいい塩梅だろうか。それならテストも書きやすいしファイルを読む回数も少なく済みそう
            - 2021/01/14: 条件にマッチするthreadの、最初と最後のmessageのタイムスタンプを取得するよう実装を変更。変更後の関数の名前が思いつかねぇ
            - 2021/01/15: 昨日書いた箇所のリファクタリング、続きの処理をちょっとだけ。slack-webの`LoadPage`に対するユーティリティー関数が必要そうね
            - 2021/01/16:
                - `LoadPage`に対するユーティリティー関数を書き始めたら、yak shavingしたくなってきた。slack-webをGHC 8.10.3でビルドした。slack-logの方も変えよう。
                - `LoadPage`に対するユーティリティー関数の実装ができた。コミットは明日。
            - 2021/01/17:
                - `LoadPage`に追加したユーティリティーを使って、スレッドのメッセージを取得する処理を書いているところ、対象のスレッドについての情報をなるべく対象のスレッドを取得する関数で返したら良いことに気づいて中間データ用の型を修正。
                    - まあ、純粋に効率のためなら`mapMaybeM`とかしないで対象を収集する段階で処理すべきなんだろうけどね...
                - ようやく、conversation.repliesが返すあのややこしい順番と実装を書きながら対峙。やっぱり分かりづらいので図を描きたいなこれは...
                    - そして今更気づいたけどこの順番、多分conversations.historyも同じ振る舞いをするな...。本当はcursorを使ってページネーションするんじゃなくて従来どおり`oldest`と`latest`を使ってページネーションしたほうが直感的ではあるな...
                    - ともあれ、slack-webとしてはcursorを使ったページネーションをデフォルトにしたほうがいい気もするし、ここはslack-log側で書き込み用のモジュールを作ろうかしら。その方が省メモリーではありそうなのよね
            - 結果: 未達
        - 使用できなくなるAPIをリストアップして書き換える
            - 結果: 未達
- Haskell入門コンテンツ:
    - 課題9の不足箇所を埋める
        - 課題9を仕上げた: <https://github.com/haskell-jp/makeMistakesToLearnHaskell/commit/5392018c6ee08fdf710adf19b55c9872cf2f35fe>
        - 結果: 達成
- その他:
    - ブログとQiitaに同時投稿するのをサポートするツール
        - 結果: 未達
- 読書など:
    - [圏論入門 Haskellで計算する具体例から](https://www.nippyo.co.jp/shop/book/8340.html)
        - 2021/01/11 - 2021/01/17
    - 中国語（ルール: プログラミングと関係がないので、これだけをやった日は更新しない）
        - 2021/01/11 - 2021/01/17

[先週の記録はこちら](https://github.com/igrep/daily-commits/blob/5e5a134c2d463114be7153f2a054e3db754d6b97/yesterday.md)
