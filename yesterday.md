# 2026/01/26 - 2026/02/01

- custard:
    - [ ] sum-moneyの改善
        - 設計:
            - 日付にマッチする行を返す
                - => コメントがマッチする行だけを返す（grepでよさそう）
                    - => 合計のみを出す
                    - => 内訳を出す
            - 2026/01/26: 動作確認してみたが、なんかおかしい。マクロが正しく展開されていない。簡単な話で、最後に返した式しか見ていないのだ。難しい。やっと直せたと思いきや、今度はtranspiler側でのバグだろうか。
                - 冷静に考えたら、マクロを普通の関数として呼び出す仕組みを作ればこの件は使う側で容易に回避できるのではないか
                - 後、以前からやろうと思っていた、`splice`を`quasiQuote`の外で展開する件も実装しないと、複文を返すマクロは実装できないだろう
            - 2026/01/27: 昨日風呂で、マクロオブジェクトの`expand`を直接呼び出せるようにしたらどうかと思ったが、まあ却って面倒くさそうだし、素直にマクロを普通の関数の関数に変換することにしよう
                - ってことでテストケースを書いた。なんか想定したとおりに失敗しないな？
            - 2026/01/28: 昨日の問題は単にテストが間違っていただけだった。直して実装を途中までやった
            - 2026/01/29: 実装は概ね出来たが、テストがおかしかったようだ。実装も一部間違っているらしい
                - 恐らく、`canBePseudoToplevelReferenced`の定義に`Macro`が入っていないせいだろう。定義を改めるか、そもそもの`canBePseudoToplevelReferenced`の動機である`jsTopLevels`の扱いを改めるべきではないか
                    - と、思ったけどやっぱむずいか。`canBePseudoTopLevelReferenced`の利用各所を見てばらすか名前を変えて考え直すかした方が良さそう
- 読書など:
    - [アンダースタンディング コンピュテーション](https://www.oreilly.co.jp/books/9784873116976/)
        - 2025/11/01 - 2026/01/29

[先週の記録はこちら](https://github.com/igrep/daily-commits/blob/e2d364f348ccbe58f632c215bc3c047f10766e7e/yesterday.md)
